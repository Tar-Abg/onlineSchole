<app-login-header></app-login-header>
<main class="user-profile-wrapper">
  <div class="profile-container">
    <section class="profile-main-info-wrapper">
      <div class="file-upload-wrapper">
        <div class="upload-image-box">
          <div class="image-upload-wrap">
            <div class="drag-text">
              <img *ngIf="!tutorBaseInfo?.photo" src="assets/images/photo-camera%201.png" alt="Upload Photo"
                   width="33" height="33">
            </div>
            <img [src]="tutorBaseInfo?.photo" *ngIf="tutorBaseInfo?.photo" alt="Upload Photo">
          </div>
        </div>
      </div>
      <div class="profile-cards">
        <div class="d-flex">
          <h2 class="profile-cards__Info--title">{{tutorBaseInfo?.fullName }} </h2>
          <span> ({{tutorBaseInfo?.userName}})</span>
        </div>
        <div class="profile-cards__details--rating" *ngIf="(ratings$ | async) as ratings">
          <fieldset class="star-rates">
            <star-rating [value]="ratings.average" [totalstars]="5" checkedcolor="#FFC107" uncheckedcolor="#c2c2c2"
                         size="35px" [readonly]="true"></star-rating>
          </fieldset>
          <span>{{ratings.average.toFixed(1)}}({{ratings.overallCount}})</span>
        </div>
        <h3 class="profile-cards__details--time flex-container-justify-start">
          <img src="assets/images/hours.svg" alt="Hours" width="24" height="24">
          42 hours tutoring
        </h3>
        <h3 class="profile-cards__details--bold">Hourly rate: <span
          class="light-text">${{tutorBaseInfo?.hourlyRate}}</span></h3>
        <h3 class="profile-cards__details--bold flex-container-justify-start">
          Lesson cancellation: <span class="light-text"> {{tutorBaseInfo?.cancellation}} </span>
        </h3>
        <h1 class="profile-cards__Info--headline"> Profile Headline </h1>
        <p class="profile-cards__Info--description">{{tutorBaseInfo?.headline}}</p>
      </div>
    </section>
    <section class="profile-buttons">
      <button class="profile-buttons--item">
        <img src="assets/images/online-learning.png"
             alt="Start Lesson"
             width="55"
             height="55">
        Start Lesson
      </button>
      <button class="profile-buttons--item">
        <img src="assets/images/message.png" alt="Messages" width="51" height="50">
        Messages
      </button>
      <button class="profile-buttons--item">
        <img src="assets/images/analyst.png" alt="Jobs Board" width="52" height="52">
        Jobs board
      </button>
      <button class="profile-buttons--item">
        <img src="assets/images/cashless-payment.png" alt="payments" width="48" height="48">
        Payments
      </button>
      <button class="profile-buttons--item">
        <img src="assets/images/lessonHistory.png" alt="Messages" width="51" height="51">
        Lesson history
      </button>
    </section>
    <section class="profile-section">
      <h2 class="profile-section__title">
        Bio
        <hr/>
      </h2>
      <div class="nested-info">
        <p class="profile-section__description">
          {{bio}}
        </p>
        <button class="read-more" (click)="toggleContent('bio')"
                *ngIf="bio && bio.length > limit">{{isBioContentToggled ? 'read more' : 'read less'}}</button>
      </div>
    </section>
    <section class="profile-section">
      <h2 class="profile-section__title">
        Wrap up your profile
        <hr/>
      </h2>
      <div class="nested-info">
        <p class="profile-section__description">
          {{wrapUp}}
        </p>
        <button class="read-more" (click)="toggleContent('wrapUp')"
                *ngIf="wrapUp && wrapUp.length > limit">{{isWrapUpContentToggled ? 'read more' : 'read less'}}</button>
      </div>
    </section>
    <section class="profile-section" *ngIf="tutorInstitutions?.length">
      <h2 class="profile-section__title">
        Education
        <hr/>
      </h2>
      <div class="nested-info without-side-padding" *ngFor="let item of tutorInstitutions">
        <div class="flex-container-justify-start grid-gap-54 grid-wrapper">
          <div class="flex-item large-mr">
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Institution name</h2>
              <p class="profile-section--subDescription">
                {{item.name}}
              </p>
            </div>
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Education level</h2>
              <p class="profile-section--subDescription">
                {{item.level}}
              </p>
            </div>
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Major</h2>
              <p class="profile-section--subDescription">
                {{item.major}}
              </p>
            </div>
          </div>
          <div class="flex-item">
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Country</h2>
              <p class="profile-section--subDescription">
                {{item.country}}
              </p>
            </div>
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">City</h2>
              <p class="profile-section--subDescription">
                {{item.city}}
              </p>
            </div>
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Date</h2>
              <p class="profile-section--subDescription">
                <span>{{item.startDate | date : 'shortDate'}} </span>
                <span *ngIf="item.graduationDate">- {{item.graduationDate | date: 'shortDate'}} </span>
              </p>
            </div>
          </div>
          <div class="flex-item align-self-end" *ngIf="item.degreeInProgress">
            <div class="checkboxes-wrapper">
              <mat-checkbox formControlName="degreeInProgress" [checked]="item.degreeInProgress">
                Degree in progress
              </mat-checkbox>
            </div>
          </div>
        </div>
      </div>
    </section>
    <section class="profile-section" *ngIf="tutorCertificates?.length">
      <h2 class="profile-section__title">
        Certificates
        <hr/>
      </h2>
      <div class="nested-info without-side-padding">
        <div class="flex-container flex-container-justify-start grid-gap-152 grid-wrapper">
          <div class="flex-item" *ngFor="let item of tutorCertificates">
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Institution name</h2>
              <p class="profile-section--subDescription">
                {{item?.institutionName}}
              </p>
            </div>
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Qualification</h2>
              <p class="profile-section--subDescription">
                {{item?.qualification}}
              </p>
            </div>
            <div class="profile-section-subItems">
              <h2 class="profile-section--subtitle">Date</h2>
              <p class="profile-section--subDescription">
                {{item?.date | date: 'shortDate'}}
              </p>
            </div>
          </div>
        </div>
      </div>
    </section>
    <div class="profile-tab-buttons">
      <button (click)="activeTab = 'availability'" class="profile-tab-buttons--item flex-container-center">
        Availability
      </button>
      <button (click)="activeTab = 'subjects'" class="profile-tab-buttons--item flex-container-center">SUBJECTS</button>
      <button (click)="activeTab = 'calendar'" class="profile-tab-buttons--item flex-container-center">Calendar</button>
      <button (click)="activeTab = 'ratings'" class="profile-tab-buttons--item flex-container-center">Ratings</button>
      <button (click)="activeTab = 'reviews'" class="profile-tab-buttons--item flex-container-center">Reviews</button>
      <hr/>
    </div>

    <div [ngSwitch]="activeTab">
      <app-availability *ngSwitchCase="'availability'" [userId]="userId"></app-availability>
      <app-subjects *ngSwitchCase="'subjects'" [userId]="userId"></app-subjects>
      <app-calendar *ngSwitchCase="'calendar'" (onAddLesson)="isOpenAddLesson = true"></app-calendar>
      <app-ratings *ngSwitchCase="'ratings'" [ratings]="ratings$ | async"></app-ratings>
      <app-reviews *ngSwitchCase="'reviews'" [userId]="userId"></app-reviews>
    </div>


    <div class="message_history_wrapper">
      <div class="flex-container">
        <div class="flex-item">
          <h3 class="message_history_title">Messages history</h3>
          <div class="search-box">
            <input type="text" placeholder="Search" class="search-chat-user-list">
            <span class="search-box-icon">
              <img src="assets/images/searchIcon.png" alt="Search Icon" width="26" height="24">
            </span>
          </div>
          <ul class="message-users-list">
            <li class="message-users-list__item isActive">
              <picture class="user-image-wrapper">
                <img src="assets/images/messageUser.png"
                     alt="User Pic"
                     width="80"
                     height="80"
                >
              </picture>
              <div class="message-info-wrapper">
                <h3 class="user-name">Ann Smith</h3>
                <p class="user-message">Okey</p>
              </div>
              <div class="isNewMessage">
                <span class="message-count">1</span>
              </div>
            </li>
            <li class="message-users-list__item">
              <picture class="user-image-wrapper">
                <img src="assets/images/messageUser.png"
                     alt="User Pic"
                     width="80"
                     height="80"
                >
              </picture>
              <div class="message-info-wrapper">
                <h3 class="user-name">Ann Smith</h3>
                <p class="user-message"></p>
              </div>
            </li>
          </ul>
        </div>
        <div class="flex-item chat">
          <div class="chat-header">
            <div class="flex-container-justify-start">
              <div class="writer-image">
                <img src="assets/images/messageUser.png" alt="Writer">
              </div>
              <h2 class="writer-name">Ann Smith</h2>
            </div>
          </div>
          <div class="chat-history">
            <!--            <div class="without-messages">-->
            <!--              <h2>Your Messages</h2>-->
            <!--              <img src="assets/images/paper-plane.png" alt="Paper Plane" width="101" height="101">-->
            <!--            </div>-->
            <div class="online-chat-wrapper">
              <h4 class="chatting-time">16.03.2021</h4>
              <div class="chat-wrapper">
                <div class="message-content">
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div> <div class="received-message flex-container-justify-start">
                  <h2 class="received-message-text">
                    Hello ))
                  </h2>
                  <span class="received-message-time">
                   14:25
                  </span>
                </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div> <div class="received-message flex-container-justify-start">
                  <h2 class="received-message-text">
                    Hello ))
                  </h2>
                  <span class="received-message-time">
                   14:25
                  </span>
                </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div> <div class="received-message flex-container-justify-start">
                  <h2 class="received-message-text">
                    Hello ))
                  </h2>
                  <span class="received-message-time">
                   14:25
                  </span>
                </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div> <div class="received-message flex-container-justify-start">
                  <h2 class="received-message-text">
                    Hello ))
                  </h2>
                  <span class="received-message-time">
                   14:25
                  </span>
                </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div> <div class="received-message flex-container-justify-start">
                  <h2 class="received-message-text">
                    Hello ))
                  </h2>
                  <span class="received-message-time">
                   14:25
                  </span>
                </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div> <div class="received-message flex-container-justify-start">
                  <h2 class="received-message-text">
                    Hello ))
                  </h2>
                  <span class="received-message-time">
                   14:25
                  </span>
                </div>
                  <div class="received-message flex-container-justify-start">
                    <h2 class="received-message-text">
                      Hello ))
                    </h2>
                    <span class="received-message-time">
                   14:25
                  </span>
                  </div>
                  <div class="sending-message flex-container-justify-end">
                  <span class="received-message-time">
                   14:25
                  </span>
                    <h2 class="received-message-text">
                      Yes, of course dear.
                    </h2>
                  </div>
                </div>
                <div class="send-message-wrapper">
                  <input type="text" placeholder="write a message...">
                  <img src="assets/images/sendMessage.png"
                       alt="Send Message Icon"
                       width="34"
                       height="35"
                  >
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</main>

<div class="add-lesson-wrapper modal-wrapper">
  <app-modal-schem *ngIf="isOpenAddLesson" (close)="isOpenAddLesson = false" [title]="'Add Lesson'">
    <app-add-lesson></app-add-lesson>
  </app-modal-schem>
</div>


